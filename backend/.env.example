# Backend Environment Variables Template
# Copy this file to .env and fill in your actual values
# DO NOT commit your .env file to version control

# ========================================
# PROJECT CONFIGURATION
# ========================================

# Environment (development, staging, production)
NODE_ENV=development

# Server Port
PORT=5000

# ========================================
# DATABASE CONFIGURATION
# ========================================

# MongoDB Connection String
# For local development:
MONGODB_URI=mongodb://localhost:27017/escrow-app

# For MongoDB Atlas (production):
# MONGODB_URI=mongodb+srv://username:password@cluster.mongodb.net/escrow-app

# Database options (optional)
DB_OPTIONS='{"maxPoolSize":10,"serverSelectionTimeoutMS":5000,"socketTimeoutMS":45000}'

# ========================================
# AUTHENTICATION & SECURITY
# ========================================

# JWT Secret Key (generate a secure random string)
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=7d
REFRESH_TOKEN_SECRET=your-refresh-token-secret
REFRESH_TOKEN_EXPIRES_IN=30d

# Session Secret (for express-session if used)
SESSION_SECRET=your-session-secret

# Password hashing rounds (recommended: 12)
BCRYPT_ROUNDS=12

# ========================================
# CLERK AUTHENTICATION
# ========================================

# Clerk Configuration
# Get these from https://dashboard.clerk.com/
CLERK_SECRET_KEY=sk_test_your_clerk_secret_key
CLERK_PUBLISHABLE_KEY=pk_test_your_clerk_publishable_key

# Clerk Webhook Secret (for verifying webhooks)
# CLERK_WEBHOOK_SECRET=whsec_your_webhook_secret

# ========================================
# M-PESA PAYMENT CONFIGURATION
# ========================================

# M-Pesa Credentials (get from Safaricom Developer Portal)
MPESA_CONSUMER_KEY=your_mpesa_consumer_key
MPESA_CONSUMER_SECRET=your_mpesa_consumer_secret
MPESA_SHORTCODE=your_mpesa_shortcode
MPESA_PASSKEY=your_mpesa_passkey
MPESA_ENVIRONMENT=sandbox

# M-Pesa URLs (sandbox vs production)
MPESA_BASE_URL=https://sandbox.safaricom.co.ke
# For production: https://api.safaricom.co.ke

# Callback URLs for M-Pesa
MPESA_CALLBACK_URL=https://your-domain.com/api/payments/mpesa/callback
MPESA_VALIDATION_URL=https://your-domain.com/api/payments/mpesa/validation

# ========================================
# CORS CONFIGURATION
# ========================================

# Frontend URL (for CORS configuration)
FRONTEND_URL=http://localhost:5173

# CORS Allowed Origins (comma-separated for production)
# Example: https://your-app.vercel.app,https://staging-app.vercel.app
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173,http://localhost:8080

# ========================================
# RATE LIMITING & SECURITY
# ========================================

# API Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Stricter rate limiting for auth endpoints
AUTH_RATE_LIMIT_MAX=5
AUTH_RATE_LIMIT_WINDOW_MS=900000

# Transaction rate limiting
TRANSACTION_RATE_LIMIT_MAX=20
TRANSACTION_RATE_LIMIT_WINDOW_MS=3600000

# Payment rate limiting
PAYMENT_RATE_LIMIT_MAX=10
PAYMENT_RATE_LIMIT_WINDOW_MS=60000

# Enable/disable security features
ENABLE_RATE_LIMITING=true
ENABLE_HELMET=true
ENABLE_CORS=true

# ========================================
# EMAIL CONFIGURATION (Optional)
# ========================================

# SMTP Settings for email notifications
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
SMTP_SECURE=false

# Email settings
FROM_EMAIL=noreply@yourdomain.com
FROM_NAME=Escrow App
REPLY_TO_EMAIL=support@yourdomain.com

# ========================================
# LOGGING CONFIGURATION
# ========================================

# Log level (error, warn, info, debug)
LOG_LEVEL=info

# Log format (simple, combined, dev)
LOG_FORMAT=dev

# Enable/disable request logging
ENABLE_REQUEST_LOGGING=true

# Log file configuration
LOG_FILE_ENABLED=false
LOG_FILE_PATH=./logs/app.log
LOG_FILE_MAX_SIZE=10m
LOG_FILE_MAX_FILES=5

# ========================================
# THIRD-PARTY SERVICES
# ========================================

# Error Tracking (Sentry - Optional)
SENTRY_DSN=your_sentry_dsn
SENTRY_ENVIRONMENT=development

# Monitoring (New Relic - Optional)
NEW_RELIC_LICENSE_KEY=your_newrelic_key
NEW_RELIC_APP_NAME=escrow-app-backend

# ========================================
# FILE UPLOAD CONFIGURATION
# ========================================

# File upload settings
UPLOAD_ENABLED=true
UPLOAD_MAX_FILE_SIZE=10485760
UPLOAD_ALLOWED_TYPES=jpg,jpeg,png,gif,pdf,doc,docx
UPLOAD_DESTINATION=./uploads

# Cloud storage (AWS S3 - Optional)
# AWS_ACCESS_KEY_ID=your_aws_access_key
# AWS_SECRET_ACCESS_KEY=your_aws_secret_key
# AWS_REGION=us-east-1
# AWS_S3_BUCKET=your-s3-bucket

# ========================================
# DEVELOPMENT OPTIONS
# ========================================

# Set to true to enable debug logging
DEBUG=true

# Enable test endpoints (should be false in production)
TESTING=false

# Mock external services in development
MOCK_MPESA=false
MOCK_EMAIL=false

# Enable API documentation
ENABLE_SWAGGER=true

# ========================================
# WEBHOOK CONFIGURATION
# ========================================

# Webhook secrets for verification
MPESA_WEBHOOK_SECRET=your_mpesa_webhook_secret
CLERK_WEBHOOK_SECRET=your_clerk_webhook_secret

# ========================================
# CACHE CONFIGURATION
# ========================================

# Redis configuration (optional)
# REDIS_URL=redis://localhost:6379
# REDIS_PASSWORD=your_redis_password

# In-memory cache TTL (in seconds)
CACHE_TTL=300

# ========================================
# BUSINESS LOGIC CONFIGURATION
# ========================================

# Transaction settings
TRANSACTION_MIN_AMOUNT=100
TRANSACTION_MAX_AMOUNT=1000000
DEFAULT_SERVICE_FEE_PERCENTAGE=2.5

# Escrow settings
ESCROW_HOLD_PERIOD_DAYS=7
AUTO_RELEASE_ENABLED=true

# Dispute settings
DISPUTE_RESOLUTION_DAYS=5
AUTO_ESCALATION_DAYS=3

# ========================================
# DEPLOYMENT CONFIGURATION
# ========================================

# Application URL (for generating absolute URLs)
APP_URL=http://localhost:5000

# Health check configuration
HEALTH_CHECK_ENABLED=true

# Performance monitoring
ENABLE_PERFORMANCE_MONITORING=false